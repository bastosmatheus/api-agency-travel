<h1 align="center" style="font-weight: bold">api-agency-travel üöå</h1>

## Descri√ß√£o üìú

Esse projeto consiste em uma api para uma ag√™ncia de viagens de √¥nibus, mostrando todo o processo para efetuar a compra de uma passagem, desde a cria√ß√£o do usu√°rio at√© a escolha de um destino para viajar. A aplica√ß√£o faz integra√ß√£o com a api maps do google, onde calcula a dura√ß√£o da viagem, distancia, data/hor√°rio de chegada, entre outras informa√ß√µes. As viagens podem ser visualizadas mesmo sem o cadastro, agora para comprar uma passagem, √© neces√°rio o login no sistema. A cria√ß√£o, edi√ß√£o ou exclus√£o das viagens e/ou rodovi√°rias √© feita apenas por usu√°rios administradores (validado atrav√©s do token jwt). O projeto foi feito utilizando arquitetura limpa e tamb√©m foram criados testes unit√°rios com o vitest.

## Tecnologias üñ•Ô∏è

Este projeto est√° utilizando as seguintes tecnologias:

- [Node.js](https://nodejs.org/en)
- [Express](https://www.expressjs.com/pt-br/)
- [Pg-promise](https://github.com/vitaly-t/pg-promise)
- [Vitest](https://vitest.dev/)
- [JWT](https://jwt.io/)
- [Zod](https://zod.dev/)

## Endpoints üìå

A seguir est√£o as rotas da aplica√ß√£o (a maioria s√≥ pode ser acessada com a valida√ß√£o do token jwt, al√©m das rotas privadas, que apenas administradores podem acessar):

### Usu√°rio

- **GET** `/users`: lista todos os usu√°rios.
- **GET** `/users/:id`: lista um usu√°rio buscando pelo id.
- **GET** `/users/email?email=`: lista um usu√°rio buscando pelo email (query string).
- **GET** `/users/cpf?cpf=`: lista um usu√°rio buscando pelo cpf (query string).
- **GET** `/users/telephone?telephone=`: lista um usu√°rio buscando pelo telephone (query string).
- **POST** `/users`: cria um novo usu√°rio.
- **POST** `/users/login`: faz o login.
- **PATCH** `/users/:id/name`: atualiza o nome do usu√°rio.
- **PATCH** `/users/:id/telephone`: atualiza o telefone do usu√°rio.
- **PATCH** `/users/:id/password`: atualiza a senha do usu√°rio.
- **DELETE** `/users/:id`: deleta um usu√°rio.

### Rodovi√°ria

- **GET** `/bus-stations`: lista todas as rodovi√°rias.
- **GET** `/bus-stations/city?city=`: lista as rodovi√°rias da cidade informada (query string).
- **GET** `/bus-stations/name?name=`: lista uma rodovi√°ria buscando pelo nome.
- **GET** `/bus-stations/:id=`: lista uma rodovi√°ria buscando pelo id.
- **POST** `/bus-stations`: registra uma nova rodovi√°ria.
- **DELETE** `/bus-stations`: deleta uma rodovi√°ria.

### Viagem

- **GET** `/travels`: lista todas as viagens.
- **GET** `/travels/origin?city=`: lista as viagens com origem na cidade informada (query string).
- **GET** `/travels/destination?city=`: lista as viagens com destino na cidade informada (query string).
- **GET** `/travels/date?date=&city=`: lista as viagens com origem na cidade informada em determinada data (query string).
- **GET** `/travels/:id`: lista uma viagem buscando pelo id.
- **POST** `/travels`: cria uma nova viagem.
- **DELETE** `/travels/:id`: deleta uma viagem.

### Passageiro

- **GET** `/passengers`: lista todos os passageiros.
- **GET** `/passengers/:id`: lista um passageiro buscando pelo id.
- **POST** `/passengers`: cria um novo passageiro.
- **DELETE** `/passengers/:id`: deleta um passageiro.

## Como rodar esse projeto? üíø

<h3>Pre-requisitos</h3>

- [Node.js](https://nodejs.org/en)
- [PostgreSQL](https://www.postgresql.org/)
- [Git](https://git-scm.com/)
- [Github](https://github.com/)

<h3>Clonagem</h3>

```bash
# clone o reposit√≥rio
$ git clone https://github.com/bastosmatheus/api-restaurant.git
```

<h3>Configura√ß√£o do arquivo .env</h3>

```bash
# arquivo .env
DATABASE_URL=postgresql://username:password@localhost:5432/yourdatabase?schema=public
API_KEY=YOUR_API_GOOGLE_KEY
SECRET_KEY=YOUR_SECRET_KEY_JWT
```

<h3>Projeto</h3>

```bash
# depois de clonado, procure a pasta do projeto
$ cd api-agency-travel

# instale todas as depend√™ncias
$ npm install

# execute o projeto
$ npm run dev
```
